# §2.4. Функции

[К началу главы](CHAPTER_2.md)

## Определения функций

Определение функций в Racket имеет следующую форму с ключевым словом **define**:

```scheme
(define (‹id› ‹arg›*) ‹expr›+)
```

Первый идентификатор ‹id› внутри круглых скобок - имя функции, а остальные идентификаторы ‹arg›* - имена аргументов (формальные параметры), которых может быть любое количество.  
Далее идёт тело функции - выражения ‹expr›+, которых может быть несколько (но минимум один). Функция возвращает значение самого последнего выражения.

Пример определения функции возведения числа x в квадрат:

```scheme
(define (square x)
  (* x x))
```

Форма вызова функции:

```scheme
(‹id› ‹arg›*)
```

Например, чтобы вызвать функцию возведения в квадрат, необходимо в круглых скобках указать сначала имя, а потом значения аргументов (фактические параметры):

```scheme
(square 5) ; 25
```

## Примеры

Функция, возвращающая сумму квадратов двух чисел:

```scheme
(define (sum-of-squares x y)
  (+ (square x) (square y)))
```

С её помощью можно вычислить гипотенузу прямоугольного треугольника по теореме Пифагора:

```scheme
(sqrt (sum-of-squares 3 4)) ; 5
```

Функция, возвращающая среднее арифметическое значение двух чисел:

```scheme
(define (mean a b)
  (/ (+ a b) 2))

(mean 4 2) ; 3
```

Функция, возвращающая строку сообщения в вымышленном чате:

```scheme
(require racket/date)

(define (chat-message user text)
  (string-append user ":\n" text "\n" (date->string (current-date))))

(displayln (chat-message "Роман" "Всем привет!"))
```

## Локальные определения

Внутри функции можно делать определения. Такие определения являются локальными - они находятся только в области видимости функции:

```scheme
(define (increment x)
  (define step 1)
  (+ x step))

(increment 5) ; 6
step ; error - в области видимости модуля переменная step не определена
```

Существует и другой способ сделать локальное определение - с помощью ключевого слова **let**:

```scheme
(define (increment x)
  (let ([step 1]
        [msg "Бла-бла-бла"])
    (displayln msg)
    (+ x step)))

(increment 5)
```

После ключевого слова let указывается список упорядоченных пар [идентификатор, значение], а далее следует тело let, в котором будут доступны эти локальные определения.

---
Далее
